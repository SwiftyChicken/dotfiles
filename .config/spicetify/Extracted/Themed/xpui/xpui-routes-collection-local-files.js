"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[379],{296:function(e,t,l){l.r(t),l.d(t,{default:function(){return ee}});var n=l(65526),r=l.n(n),a=l(14298),i=l(83332),o=l(27378),c=l.n(o),s="r6WrlrFg43LbFLJu5l5H",u="_BTne_VR5pO5tq1GUT66",m=l(35181),d=l(35511),f=l(76385),g=l(13170),E=l(90849),p=l(41805),y=l(57940),b=l(26425),x=l(36726),h=l(79378),k=l(50878),C=l(40299),v=l(46208),P=l(88254),D=l(51029),R=l(70266),S=l(2124),O=l(72612),I=l(5464),w=l.n(I),T=l(56904),U=l(18499),j=l(37585),A=l(12275);const N=c().memo((({uri:e,uid:t,name:l,duration_ms:n,artists:r,album:a,isMOGEFRestricted:i,isExplicit:s,isPlayable:u,index:d,contextUri:f,imgUrl:g,usePlayContextItem:E})=>{const{filter:p}=(0,o.useContext)(U.fo),{isActive:y,isPlaying:b,triggerPlay:x,togglePlay:h}=E({uid:t,uri:e,index:d}),C=(0,T.P)(),{badges:I,hasBadges:N}=(0,R.r)({isExplicit:s}),B=(null==r?void 0:r.map((e=>e.name)).join(m.ag.getSeparator()))||"";return c().createElement(k.ZP,{value:"row",index:d},c().createElement(A._,{menu:c().createElement(j.N,{uri:e,uid:t,contextUri:f})},c().createElement(D.c,{uri:e,contextUri:f,isActive:y,index:d,onTriggerPlay:()=>{x()},ariaRowIndex:d+1,isPlayable:u,ageRestricted:i,dragMetadata:{name:l,createdBy:B}},c().createElement(P.Dd,{ariaColIndex:0},c().createElement(P.Du,{playAriaLabel:m.ag.get("tracklist.a11y.play",l,B),isPlaying:b,onClick:()=>{h()}},c().createElement(P.km,null,d+1))),c().createElement(P.vZ,{ariaColIndex:1},c().createElement(P.lD,{src:g||(0,O.c)()}),c().createElement(P.vm,null,c().createElement(P.Wh,null,c().createElement(w(),{searchWords:[p],textToHighlight:l,findChunks:C,highlightClassName:v.Z.filterHighlight})),N&&c().createElement(P.g3,null,I.explicit?c().createElement(S.N,null):null),c().createElement(P.K9,null,r&&c().createElement(T.o,{nonInteractive:!0,artists:r,filter:p})))),c().createElement(P.UA,{ariaColIndex:2},a.name&&c().createElement(P.BM,{nonInteractive:!0,uri:a.uri,name:a.name},c().createElement(w(),{searchWords:[p],textToHighlight:a.name,findChunks:C,highlightClassName:v.Z.filterHighlight}))),c().createElement(P.mU,{ariaColIndex:3},c().createElement(P.A$,{duration:n}),c().createElement(P.Zv,{menu:c().createElement(j.N,{uri:e,uid:t,contextUri:f})})))))}),((e,t)=>e.uri===t.uri&&e.index===t.index));var B=l(83553);const Q=new Set(B.MI),F=c().memo((({uri:e,tracks:t,columns:l,sortState:n,handleSort:r,usePlayContextItem:a,tracklistDomRef:i})=>{const s=(0,o.useRef)(null),u=(0,o.useCallback)(((t,l)=>{const n=(0,C.X)(t.album.images,{desiredSize:40,desiredLabel:"small"});return c().createElement(N,{key:t.uid,index:l,contextUri:e,uri:t.uri,uid:t.uid,isPlayable:t.isPlayable,duration_ms:t.duration.milliseconds,name:t.name,artists:t.artists,album:t.album,isExplicit:t.isExplicit,isMOGEFRestricted:t.is19PlusOnly,type:t.type,imgUrl:(null==n?void 0:n.url)||"",usePlayContextItem:a})}),[e,a]);return c().createElement(c().Fragment,null,c().createElement(k.ZP,{value:"playlist-tracklist"},c().createElement(h.Pv,{key:e,ariaLabel:m.ag.get("local-files"),hasHeaderRow:!0,columns:l,sortableColumns:Q,sortState:n,onSort:r,renderRow:u,resolveUri:e=>e.uri,resolveUid:e=>e.uid,tracks:t,nrTracks:t.length,limit:100,outerRef:s,outerDomRef:i})))}));var L=l(17088),_=l(75845),z=l(47820),M=l(11847),H=l(1266),K=l(86268),W=l(40093),Z=l(73977),G=l(90700),X=l(23),q=l(79032);function $(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function J(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?$(Object(l),!0).forEach((function(t){r()(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):$(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}const V=[h.QD.INDEX,h.QD.TITLE,h.QD.ALBUM,h.QD.DURATION],Y=()=>{const{filter:e}=(0,o.useContext)(U.fo),{sortState:t,setSortState:l}=(0,o.useContext)(B.Gb),n=(0,o.useContext)(_.t),{useNamespacedLocalStorage:r}=(0,o.useContext)(W.Xz),[h]=r(Z.J,!1),k=(0,g.sn)(),[C,v]=(0,o.useState)([]),P=(0,K.Y)(a.Fzl),{filterBoxApiRef:D,filterBoxDomRef:R,tracklistDomRef:S,handleKeyDown:O}=(0,q.Q)(),I=(0,o.useCallback)((e=>{l((0,M.VK)(e,t))}),[t,l]),w=(0,o.useCallback)((async()=>{const l=await n.getContents({sort:(0,M._j)(t),filter:(0,M.$u)(e)});v(l.items)}),[n,t,e]);(0,o.useEffect)((()=>{w()}),[w]);const{isPlaying:T,togglePlay:j,usePlayContextItem:A}=(0,X.n)({uri:z.bf,pages:[{items:C.map((e=>J(J({},e),{},{provider:null})))}]},{featureIdentifier:"local_files"});return k?0!==k.totalLength&&h?c().createElement("div",{role:"presentation",className:s,onKeyDown:O},c().createElement(y.gF,{backgroundColor:P},c().createElement(E.W,null,c().createElement(b.$,{size:d.qE.sm,onClick:()=>j(),isPlaying:T,uri:z.bf}),c().createElement(p.i,{text:m.ag.get("local-files")})),c().createElement(y.sP,null,c().createElement(y.xd,null,m.ag.get("local-files")),c().createElement(y.T0,null,m.ag.get("local-files.description")))),c().createElement(f.o,{backgroundColor:P},c().createElement(f.F,null,c().createElement(b.$,{size:d.qE.xl,onClick:()=>j(),isPlaying:T,uri:z.bf}),c().createElement("div",{className:u},c().createElement(H.K,{placeholder:m.ag.get("playlist.search_in_playlist"),filterBoxApiRef:D,outerRef:R}),c().createElement(G.c,{columns:B.MI})))),c().createElement("div",{className:"contentSpacing"},c().createElement(F,{tracks:C,uri:z.bf,columns:V,handleSort:I,sortState:t,usePlayContextItem:A,tracklistDomRef:S}))):c().createElement(L.u,{linkTo:"/preferences",linkTitle:m.ag.get("local-files.empty-button"),message:m.ag.get("local-files.empty-description"),title:m.ag.get("local-files.empty-header")},c().createElement(i.X,{iconSize:64})):c().createElement(x.h,{errorMessage:m.ag.get("error.request-artist-failure")})};var ee=()=>c().createElement(B.kz,{uri:"spotify:internal:local-files"},c().createElement(U.hz,{uri:"spotify:internal:local-files"},c().createElement(Y,null)))},90700:function(e,t,l){l.d(t,{c:function(){return m}});var n=l(27378),r=l.n(n),a=l(79378),i=l(83553),o=l(11847),c=l(81368),s=l(2315);function u(e){return!!e}const m=({columns:e})=>{const t=[...e];t.splice(2,0,a.QD.ARTIST);const{sortState:l,setSortState:m}=(0,n.useContext)(i.Gb),d=function(e){return null===e.column?s.mE[a.QD.INDEX]:(0,o.cB)(e.column,e.order)?s.mE[a.QD.ARTIST]:s.mE[e.column]}(l),f=(0,n.useCallback)((e=>{m((0,s.WQ)(e,l.column,l.order))}),[m,l.column,l.order]),g=(0,n.useCallback)((()=>null!==l.column),[l.column]),E=t.map((e=>s.mE[e])).filter(u);return r().createElement(c.A,{options:E,onSelect:f,selected:d,isSelectionChanged:g,sortOrder:l.order})}},79032:function(e,t,l){l.d(t,{Q:function(){return r}});var n=l(27378);const r=()=>{const e=(0,n.useRef)(null),t=(0,n.useRef)(null),l=(0,n.useRef)(null);return{filterBoxApiRef:e,filterBoxDomRef:t,tracklistDomRef:l,handleKeyDown:n=>{var r,a,i;"Escape"===n.key&&((null!==(r=t.current)&&void 0!==r&&r.contains(n.target)||null!==(a=l.current)&&void 0!==a&&a.contains(n.target))&&(null===(i=e.current)||void 0===i||i.clearFilter()))}}}}}]);
//# sourceMappingURL=xpui-routes-collection-local-files.js.map