(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[730],{61468:function(e,n,i){"use strict";i.r(n),i.d(n,{TrackContainer:function(){return v},default:function(){return g}});var t=i(27378),a=i.n(t),d=i(23104),r=i(66917),l=i.n(r),s=i(1391),c=i(21195),m=i(73429),o=i(81971),u=i(31284);var k=i(11509);const v=a().memo((()=>{var e;const n=(0,m.k6)(),i=(0,m.TH)(),a=(0,t.useContext)(k.ZF),r=(0,c.g)(),{trackId:v}=(0,m.UO)(),{isAnonymous:g}=(0,d.v9)(s.Gg),S=new URLSearchParams(i.search).get("context"),N=l().trackURI(v).toURI(),f=(F={uri:N},(0,o.a)(u.getTrack,F));var F;const p=(0,t.useCallback)(((e,i)=>{var t;const a=r.getState(),d=`${null===(t=l().from(i))||void 0===t?void 0:t.toURLPath(!0)}?highlight=${N}`;g?n.push(d):(a&&!a.isPaused||e>-1&&r.play({uri:i},{featureIdentifier:"track",referrerIdentifier:"deeplink"},{skipTo:{index:e}}),n.replace(d))}),[n,g,r,N]),h=(0,t.useCallback)((()=>{var e;if(f.loading||null===(e=f.data)||void 0===e||!e.trackUnion)return;const n=f.data.trackUnion;p(n.trackNumber-1,n.album.uri)}),[p,null==f||null===(e=f.data)||void 0===e?void 0:e.trackUnion,f.loading]);return(0,t.useEffect)((()=>{const e=l().isPlaylistV1OrV2(S);S&&e?a.getContents(S).then((e=>{const n=e.items.findIndex((e=>(null==e?void 0:e.uri)===N));n<0?h():p(n,S)})):h()}),[S,h,p,a,N]),null}));var g=v},31284:function(e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"trackFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contentRating"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"duration"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"playability"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reason"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"trackNumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"playcount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"saved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sharingInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"shareUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"shareId"},arguments:[],directives:[]}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"trackArtists"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"trackAlbum"},directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"trackArtists"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artistsWithRoles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"role"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"artist"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"visuals"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"profile"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"trackAlbum"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Track"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"album"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"date"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"precision"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"copyright"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"courtesyLine"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"trackAlbumCoverArt"},directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"trackAlbumCoverArt"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Album"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"coverArt"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"extractedColors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorRaw"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"sources"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"width"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"height"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getTrack"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"trackUnion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"trackFields"},directives:[]}]}}]}}],loc:{start:0,end:1123}};n.loc.source={body:"fragment trackFields on Track {\n  id\n  uri\n  name\n  contentRating {\n    label\n  }\n  duration {\n    totalMilliseconds\n  }\n  playability {\n    playable\n    reason\n  }\n  trackNumber\n  playcount\n  saved\n  sharingInfo {\n    shareUrl\n    shareId\n  }\n  ...trackArtists\n  ...trackAlbum\n}\n\nfragment trackArtists on Track {\n  artistsWithRoles {\n    totalCount\n    items {\n      role\n      artist {\n        uri\n        visuals {\n          avatarImage {\n            sources {\n              width\n              height\n              url\n            }\n          }\n        }\n        profile {\n          name\n        }\n      }\n    }\n  }\n}\n\nfragment trackAlbum on Track {\n  album {\n    uri\n    id\n    date {\n      isoString\n      precision\n    }\n    copyright {\n      totalCount\n      items {\n        text\n        type\n      }\n    }\n    courtesyLine\n    ...trackAlbumCoverArt\n  }\n}\n\nfragment trackAlbumCoverArt on Album {\n  coverArt {\n    extractedColors {\n      colorRaw {\n        hex\n      }\n    }\n    sources {\n      url\n      width\n      height\n    }\n  }\n}\n\nquery getTrack($uri: ID!) {\n  trackUnion(uri: $uri) {\n    ...trackFields\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,n)})),e.definitions&&e.definitions.forEach((function(e){i(e,n)}))}var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}function d(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var d=t[n]||new Set,r=new Set,l=new Set;for(d.forEach((function(e){l.add(e)}));l.size>0;){var s=l;l=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(t[e]||new Set).forEach((function(e){l.add(e)})))}))}return r.forEach((function(n){var t=a(e,n);t&&i.definitions.push(t)})),i}n.definitions.forEach((function(e){if(e.name){var n=new Set;i(e,n),t[e.name.value]=n}})),e.exports=n,e.exports.trackFields=d(n,"trackFields"),e.exports.trackArtists=d(n,"trackArtists"),e.exports.trackAlbum=d(n,"trackAlbum"),e.exports.trackAlbumCoverArt=d(n,"trackAlbumCoverArt"),e.exports.getTrack=d(n,"getTrack")}}]);
//# sourceMappingURL=xpui-routes-track.js.map