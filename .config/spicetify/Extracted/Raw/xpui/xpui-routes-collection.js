"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[309],{38826:function(e,t,n){n.d(t,{g:function(){return y}});var r=n(27378),a=n.n(r),l=n(60042),s=n.n(l),c=n(9071),o=n(84375);const i=({renderItems:e,nrItems:t,estimatedItemMaxHeight:n,scrollNodeRef:l,nrRowsOverscan:s=5})=>{const i=(0,r.useRef)(null),u=(0,r.useRef)(null),m=(0,r.useRef)(null),d=(0,r.useRef)(0),f=(0,r.useRef)({rowCount:0,rowHeight:n,columnCount:1}),[g,p]=(0,r.useState)({firstItemToRender:0,lastItemToRender:-1}),h=(0,r.useCallback)(((e,t)=>{const n=l.current;if(!n)return;const r=Math.floor(n.offsetHeight/t)+2*s;f.current={rowCount:r,rowHeight:t,columnCount:e}}),[s,l]),E=(0,r.useCallback)((()=>{const e=l.current;if(!e)return;const n=Math.floor((e.scrollTop-d.current)/f.current.rowHeight),r=Math.max(n-s,0),a=r*f.current.columnCount,c=Math.min((r+f.current.rowCount-1)*f.current.columnCount-1,t-1);a===g.firstItemToRender&&c===g.lastItemToRender||p({firstItemToRender:a,lastItemToRender:c})}),[g.firstItemToRender,g.lastItemToRender,t,s,l]),y=(0,r.useCallback)(((t,n,r)=>{const a=r+c.w;return a!==f.current.rowHeight&&t>0&&(h(t,a),E()),e(g.firstItemToRender,g.lastItemToRender,t)}),[h,g.firstItemToRender,g.lastItemToRender,E,e]);(0,r.useEffect)((()=>{const e=m.current,t=l.current;e&&t&&(d.current=e.getBoundingClientRect().top-t.getBoundingClientRect().top+t.scrollTop)}),[l]),(0,r.useEffect)((()=>{if(!window.IntersectionObserver)return()=>{};const e=new window.IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&E()}))}));return i.current&&e.observe(i.current),u.current&&e.observe(u.current),()=>{e.disconnect()}}),[E]);const b=Math.ceil(t/f.current.columnCount),v=Math.min(b*f.current.rowHeight,f.current.rowHeight*(s-2)),C=f.current.rowHeight*(g.firstItemToRender/f.current.columnCount),w=g.lastItemToRender/f.current.columnCount+1<b?f.current.rowHeight*(b-f.current.rowCount)-C:0;return a().createElement("div",{ref:m,className:o.Z.wrapper,style:{height:b*f.current.rowHeight+"px"}},a().createElement("div",{ref:i,className:o.Z.topSentinel,style:{height:`${C+v}px`}},a().createElement("div",{style:{height:`${v}px`}})),a().createElement("div",{style:{transform:`translateY(${C}px)`}},a().createElement(c.T,{columnAware:!0,rowAware:!0,render:y})),a().createElement("div",{ref:u,className:o.Z.bottomSentinel,style:{height:`${w+v}px`}},a().createElement("div",{style:{height:`${v}px`}})))};var u=n(65526),m=n.n(u);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(){const e=(e,t)=>{switch(t.type){case"INVALIDATE":return f(f({},e),{},{isValid:!1});case"CACHE_ITEMS":return e.isValid?f(f({},e),{},{items:f(f({},e.items),t.data),hasData:!0}):{isValid:!0,items:f({},t.data),hasData:!0};default:throw new Error("Action not supported")}},[t,n]=(0,r.useReducer)(e,{items:{},isValid:!0,hasData:!1});return{cacheItems:(0,r.useCallback)(((e,t)=>{const r=e.reduce(((e,n,r)=>(e[r+t]=n,e)),{});n({type:"CACHE_ITEMS",data:r})}),[n]),getCachedItems:(0,r.useCallback)(((e,n)=>{const r=[],a=[];for(let l=e;l<=n;l++)t.items[l]||r.push(l),a.push(t.items[l]);return t.isValid?{items:a,missing:r.length>0?{firstMissingIndex:Math.min(...r),lastMissingIndex:Math.max(...r)}:null}:{items:a,missing:{firstMissingIndex:e,lastMissingIndex:n}}}),[t]),invalidateCache:(0,r.useCallback)((()=>{n({type:"INVALIDATE"})}),[n]),hasCachedData:t.hasData}}var p=n(44638),h=n(65725),E="V_BW9nkVududq_ONLePC";function y({renderCard:e,nrCards:t,fetchData:n,limit:l=50,cardGridApiRef:c}){const{scrollNodeRef:o}=(0,r.useContext)(p.VX),{invalidateCache:u,getItemsFromCache:m,hasCachedData:d}=function(e){const{getCachedItems:t,cacheItems:n,invalidateCache:a,hasCachedData:l}=g(),s=(0,r.useRef)(!1),c=(0,r.useRef)(!1);(0,r.useEffect)((()=>(c.current=!0,()=>{c.current=!1})));const o=(0,r.useCallback)(((t,r)=>{const a=Math.max(t,0);s.current||(s.current=!0,e(a,r).then((e=>{s.current=!1,e.length>0&&c.current&&n(e,a)})))}),[n,e]);return{invalidateCache:a,getItemsFromCache:(0,r.useCallback)(((e,n,r)=>{const{items:a,missing:l}=t(e,n);if(l){const{firstMissingIndex:t,lastMissingIndex:a}=l;a===n?o(t,r):t===e?o(a-r+1,r):o(t,a-t+1)}return a}),[o,t]),hasCachedData:l}}(n);(0,r.useImperativeHandle)(c,(()=>({update:()=>u()})));return a().createElement("div",{className:s()({[E]:!d})},a().createElement(i,{renderItems:(n,r,s)=>{const c=m(n,r,l);return-1===r&&t>0?[a().createElement(h.P,{key:"placeholder"})]:c.map(((t,r)=>t?e(t,n+r,s):a().createElement(h.P,{key:r})))},scrollNodeRef:o,nrItems:t,estimatedItemMaxHeight:500}))}},1216:function(e,t,n){n.r(t),n.d(t,{Collection:function(){return mt},default:function(){return dt}});var r=n(27378),a=n.n(r),l=n(23104),s=n(73429),c=n(35181);const o=(0,n(80406).P1)((e=>e.features),(e=>(null==e?void 0:e.enableShows)||!1));var i=n(28685),u=n(18299),m=n(44638),d=n(91421),f=n(98562);var g=n(6152);const p=()=>{const e=function(){const[e,t]=(0,r.useState)(window.innerWidth),{scrollNodeChildRef:n}=(0,r.useContext)(m.VX),a=(0,d.y)((e=>{null!=e&&e.width&&t(e.width)}),250);return(0,f.y)({refOrElement:n,observeOnly:"width",onResize:a}),e}(),t=(0,l.v9)(o),n=(0,r.useMemo)((()=>[{title:c.ag.get("playlists"),itemId:"collection.tab-playlists",to:"/collection/playlists"},...t?[{title:c.ag.get("podcasts"),itemId:"collection.tab-podcasts",to:"/collection/podcasts",uri:"spotify:user:@:collection:podcasts"}]:[],{title:c.ag.get("artists"),itemId:"collection.tab-artists",to:"/collection/artists",uri:"spotify:user:@:collection:artists"},{title:c.ag.get("albums"),itemId:"collection.tab-albums",to:"/collection/albums",uri:"spotify:user:@:collection:albums"}]),[t]);return a().createElement(u.w,null,a().createElement(i.n,{className:g.Z.tabBar,links:n,windowSize:e}))};var h=n(17088),E=n(8934),y=n(9807),b=n(57660),v=n(65526),C=n.n(v),w=n(66917),O=n.n(w),k=n(2315);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){C()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const x=e=>S(S({},e),{},{id:O().from(e.uri).getBase62Id(),external_urls:{spotify:""},href:"",images:e.images.map((e=>e.label?{url:e.url,label:e.label}:{url:e.url,height:e.height,width:e.width}))}),D=e=>e.map(x),P=k.oT.ADDED_AT,A=k.oT.ADDED_AT,R=k.oT.ADDED_AT,N=k.oT.MOST_RELEVANT;var j=n(18499),T=n(9195),M=n(24209),_=n(27215),L=n(8182);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){C()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e,t,n){const r=Z({},n);return r.entities=t?e.items||[]:r.entities.concat(e.items||[]),r.total=e.totalLength,r.next=e.next,r}function $(e,t){const n=Z({},t),r=t.entities.filter((t=>t.uri!==e));return n.total=(t.total||0)-(t.entities.length-r.length),n.entities=r,n}const B={offset:0,limit:1},U=()=>{const e=(0,r.useContext)(b.H);return(e=>{const[t,n]=(0,r.useState)(null),a=(0,r.useCallback)((async()=>{if(!e)return;const t=await e();n((null==t?void 0:t.totalLength)||0)}),[e]);return(0,r.useEffect)((()=>{null===t&&a()}),[t,a]),{total:t}})((0,r.useCallback)((()=>e?null==e?void 0:e.getShows(B):Promise.resolve({totalLength:0})),[e]))};var z=n(36726),Y=n(38826),F=n(410),q=n(50878),Q=n(75570),W=n(8751),G=n(44018);const X=a().memo((({nrArtists:e})=>{const t=(0,r.useContext)(b.H),{filter:n}=(0,r.useContext)(j.fo),{sortState:l}=(0,r.useContext)(M.Q),s=(0,r.useRef)(null),[o,i]=(0,r.useState)(e),u=(0,r.useCallback)((async(e,r)=>{const a=await t.getArtists({offset:e,limit:r,filter:(0,k.$u)(n),sort:(0,k.e3)(l)});return a.totalLength!==o&&i(a.totalLength),a.items}),[t,n,l,o]),m=(0,r.useCallback)(((e,t)=>a().createElement(q.ZP,{key:e.uri,value:"card",index:t},a().createElement(F.I,{entity:e}))),[]);return(0,r.useEffect)((()=>{s.current&&s.current.update()}),[l,n,e]),a().createElement(a().Fragment,null,a().createElement("div",{className:g.Z.header},a().createElement(y.Dy,{as:"h1",variant:y.Dy.canon},c.ag.get("artists")),a().createElement(r.Suspense,{fallback:null},a().createElement(T.E,{filterPlaceholder:c.ag.get("collection.filter.artists"),sortOptions:k.o$}))),a().createElement(Y.g,{nrCards:o,renderCard:m,fetchData:u,cardGridApiRef:s}))})),K=a().memo((({nrArtists:e})=>{const t=(0,r.useContext)(b.H),[n,l]=(0,r.useState)({entities:[],total:e}),s=(0,r.useRef)(!1),o=(0,r.useRef)(!1),i=(0,r.useCallback)((async()=>{if(!o.current&&!s.current){var e;s.current=!0;const r=await t.getArtists({offset:null!==(e=n.next)&&void 0!==e?e:void 0});r.next||(o.current=!0),s.current=!1,n.next&&r.next===n.next||l(V(r,!1,n))}}),[t,n]),u=(0,r.useCallback)((e=>{l($(e,n))}),[n]);return a().createElement(Q.C,{onReachBottom:i,triggerOnInitialLoad:!0},a().createElement("div",{className:g.Z.header},a().createElement(y.Dy,{as:"h1",variant:y.Dy.canon},c.ag.get("artists"))),a().createElement(G.Y,{onCollectionItemRemove:u},a().createElement(W.D,{entities:D(n.entities)})))})),J=a().memo((()=>{const{total:e}=(()=>{const e=(0,r.useContext)(b.H),[t,n]=(0,r.useState)(null),a=(0,r.useCallback)((async()=>{if(!e)return;const t=await(null==e?void 0:e.getArtists(B));n((null==t?void 0:t.totalLength)||0)}),[e]);return(0,r.useEffect)((()=>{null===t&&a()}),[t,a]),(0,_.b)(L.EW.UPDATE,a),{total:t}})(),t=(0,r.useContext)(b.H),{canFetchArtistsWithOffset:n}=t.getCapabilities();return null===e?a().createElement(z.h,{errorMessage:c.ag.get("error.request-collection-artists-failure")}):e>0?n?a().createElement(X,{nrArtists:e}):a().createElement(K,{nrArtists:e}):a().createElement(h.u,{message:c.ag.get("collection.empty-page.artists-subtitle"),title:c.ag.get("collection.empty-page.artists-title"),linkTo:"/search",linkTitle:c.ag.get("collection.empty-page.artists-cta")},a().createElement(E.d,{size:64,viewBox:"0 0 64 64"}))})),ee=a().memo((()=>a().createElement(M.$,{uri:"collection/artists",defaultSortOption:A},a().createElement(j.hz,{uri:"collection/artists"},a().createElement(J,null)))));var te=n(11631),ne=n(17220);const re=a().memo((({nrAlbums:e})=>{const t=(0,r.useContext)(b.H),{filter:n}=(0,r.useContext)(j.fo),{sortState:l}=(0,r.useContext)(M.Q),s=(0,r.useRef)(null),[o,i]=(0,r.useState)(e),u=(0,r.useCallback)((async(e,r)=>{const a=await t.getAlbums({offset:e,limit:r,filter:(0,k.$u)(n),sort:(0,k.Aq)(l)});return a.totalLength!==o&&i(a.totalLength),a.items}),[t,n,l,o]),m=(0,r.useCallback)(((e,t)=>a().createElement(q.ZP,{key:e.uri,value:"card",index:t},a().createElement(ne.r,{entity:e}))),[]);return(0,r.useEffect)((()=>{s.current&&s.current.update()}),[l,n,e]),a().createElement(a().Fragment,null,a().createElement("div",{className:g.Z.header},a().createElement(y.Dy,{as:"h1",variant:y.Dy.canon},c.ag.get("albums")),a().createElement(r.Suspense,{fallback:null},a().createElement(T.E,{filterPlaceholder:c.ag.get("collection.filter.albums"),sortOptions:k.Ru}))),a().createElement(Y.g,{nrCards:o,renderCard:m,fetchData:u,cardGridApiRef:s}))})),ae=a().memo((()=>{const{total:e}=(()=>{const e=(0,r.useContext)(b.H),[t,n]=(0,r.useState)(null),a=(0,r.useCallback)((async()=>{if(!e)return;const t=await(null==e?void 0:e.getAlbums(B));n((null==t?void 0:t.totalLength)||0)}),[e]);return(0,r.useEffect)((()=>{null===t&&a()}),[t,a]),(0,_.b)(L.EW.UPDATE,a),{total:t}})();return null===e?a().createElement(z.h,{errorMessage:c.ag.get("error.request-collection-albums-failure")}):e?a().createElement(re,{nrAlbums:e}):a().createElement(h.u,{linkTo:"/search",linkTitle:c.ag.get("collection.empty-page.albums-cta"),message:c.ag.get("collection.empty-page.albums-subtitle"),title:c.ag.get("collection.empty-page.albums-title")},a().createElement(te.Z,null))})),le=a().memo((()=>a().createElement(M.$,{uri:"collection/albums",defaultSortOption:P},a().createElement(j.hz,{uri:"collection/albums"},a().createElement(ae,null)))));var se=n(58733),ce=n(60042),oe=n.n(ce),ie="collection-collectionEntityHeroCard-container",ue="collection-collectionEntityHeroCard-likedSongs",me="_eyW36diatyc5kQKET3Q",de="collection-collectionEntityHeroCard-headerContainer",fe="collection-collectionEntityHeroCard-tracksContainer",ge="ltEX1nUVp8XFzPjci6JJ",pe="collection-collectionEntityHeroCard-descriptionContainer",he="collection-collectionEntityHeroCard-opacityText",Ee=n(42767),ye=n(35075);function be(e,t=null){return Array.from(new Array(e).keys()).map((e=>a().createElement("div",{className:ge,style:{width:t?`${t}ch`:void 0},key:e})))}const ve=({entity:e={},onClick:t})=>{const n=(0,ye.MY)({limit:7}),{name:r="",uri:l=""}=e;return a().createElement(Ee.Z,{className:oe()(ie,ue),onClick:t,headerText:r,featureIdentifier:"your_library",uri:l,renderCardImage:()=>a().createElement("div",{className:de},a().createElement("div",{className:fe},n?n.items.map((({uri:e,name:t,artists:[n]},r)=>a().createElement("span",{key:e},a().createElement("span",{className:he},r?" • ":""),a().createElement("span",{dir:"auto"},n.name),a().createElement("span",{dir:"auto",className:he},t)))):be(3))),renderSubHeaderContent:()=>a().createElement("div",{className:pe},n?`${n.totalLength} ${r}`:be(1,r.length))})},Ce=({entity:e={}})=>{const t=(0,ye.j$)({limit:7}),{name:n="",uri:r=""}=e;return a().createElement(Ee.Z,{className:oe()(ie,me),headerText:n,featureIdentifier:"your_library",uri:r,renderCardImage:()=>a().createElement("div",{className:de},a().createElement("div",{className:fe},t?t.items.map((({uri:e,name:t,show:n},r)=>a().createElement("span",{key:e},a().createElement("span",{className:he},r?" • ":""),a().createElement("span",{dir:"auto"},t),a().createElement("span",{dir:"auto",className:he},n.name)))):be(3))),renderSubHeaderContent:()=>a().createElement("div",{className:pe},t?c.ag.get("tracklist-header.episodes-counter",t.totalLength):be(1,n.length))})};var we=n(13170),Oe=n(99176),ke=n(81978),Ie=n(9085),Se="w2CEemrwOCicSsMgOQQt",xe="_Y2d_5NzsFfaxkqUljMI";const De=()=>{const e=(0,Ie.g)("images/playlist-folder-filled.svg");return a().createElement("div",{className:Se},a().createElement("img",{src:e,alt:c.ag.get("local-files"),className:xe}))};var Pe=n(41029),Ae=n(75845),Re=n(47820),Ne=n(40093),je=n(73977),Te=n(23),Me=n(93651);function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){C()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const He=function({entity:e}){var t;const n=(0,we.ui)(),{name:l,uri:s,images:o}=e,i=(0,r.useRef)(null),u=(0,r.useRef)(!0),m=(0,r.useContext)(Ae.t),{isPlaying:f}=(0,Me.cR)(Re.bf),{togglePlay:g}=(0,Te.n)({uri:Re.bf,pages:[{items:(null===(t=i.current)||void 0===t?void 0:t.map((e=>Le(Le({},e),{},{provider:null}))))||[]}]},{featureIdentifier:"local_files"});(0,r.useEffect)((()=>(u.current=!0,()=>{u.current=!1})),[]);const{useNamespacedLocalStorage:p}=(0,r.useContext)(Ne.Xz),[h]=p(je.J,!1),E=(0,d.y)((async()=>{if(!i.current){const e=await m.getContents();i.current=e.items}var e;u&&g(void 0,{uri:Re.bf,pages:[{items:(null===(e=i.current)||void 0===e?void 0:e.map((e=>Le(Le({},e),{},{provider:null}))))||[]}]})}),Pe.s_);return n.canFetchAllTracks&&h?a().createElement(Oe.Z,{delegatePlayback:!0,delegateLogging:!0,isPlaying:f,onPlay:E,headerText:l,featureIdentifier:"local_files",uri:s,renderCardImage:()=>a().createElement(ke.x,{images:o,fallback:{Component:De}}),renderSubHeaderContent:()=>a().createElement("span",null,c.ag.get("local-files.description"))}):null},Ze=function(e){return a().createElement(r.Suspense,{fallback:null},a().createElement(He,e))};var Ve=n(19493),$e=n(31630),Be=n(6007),Ue=n(1391),ze=n(11509),Ye=n(92270),Fe=n(99038);function qe(e){return Boolean(e)}const Qe=a().memo((function({nrPlaylists:e,showYourEpisodesCard:t,showLocalFilesCard:n}){const{filter:s}=(0,r.useContext)(j.fo),{sortState:o}=(0,r.useContext)(M.Q),i=(0,r.useContext)(ze.BS),[u,m]=(0,r.useState)(e),d=(0,r.useRef)(null),f=(0,l.v9)(Ue.Gg).user,p=(0,r.useMemo)((()=>s?[]:[(0,se.I2)(f),(0,se.I2)(f),t?(0,se.bl)(f):null,n?(0,se.gB)(f):null].filter(qe)),[s,n,t,f]),h=(0,r.useCallback)((async(e,t)=>{const n=p.slice(e),r=await i.getContents({offset:e-(p.length-n.length),limit:t,filter:(0,k.$u)(s),sort:(0,k.pT)(o),flatten:!0,decorateImagesAndOwner:!0});return r.totalItemCount!==u&&m(r.totalItemCount),n.concat(r.items)}),[p,i,s,o,u]),E=(0,r.useCallback)(((e,t,n)=>{if(e.id===se.G&&1===t)return null;const r=function(e,t,n){return e===se.G&&n>1?ve:e===se.nk?Ze:e===se.Y3?Ve.T:(0,$e.U)(t)}(e.id,e.uri,n);return a().createElement(q.ZP,{key:e.uri,value:"card",index:t},a().createElement(r,{entity:e}))}),[]);return(0,r.useEffect)((()=>{d.current&&d.current.update()}),[o,s,e]),a().createElement(a().Fragment,null,a().createElement("div",{className:g.Z.header},a().createElement(y.Dy,{as:"h1",variant:y.Dy.canon},c.ag.get("playlists")),a().createElement(r.Suspense,{fallback:null},a().createElement(T.E,{filterPlaceholder:c.ag.get("collection.filter.playlists"),sortOptions:k.w0}))),a().createElement(Y.g,{nrCards:u+p.length,renderCard:E,fetchData:h,cardGridApiRef:d}))})),We=a().memo((()=>{const e=(0,ze.Rt)(),t=(0,Ye.x)(),n=(0,we.ui)(),{createPlaylist:l}=(0,Fe.K)(),{useNamespacedLocalStorage:s}=(0,r.useContext)(Ne.Xz),[o]=s(je.J,!1),i=(0,r.useCallback)((()=>{l()}),[l]);return null===e||null===t?a().createElement(z.h,{errorMessage:c.ag.get("error.request-collection-albums-failure")}):null!=e&&e.playlistCount?a().createElement(Qe,{nrPlaylists:e.playlistCount,showYourEpisodesCard:t.totalLength>0,showLocalFilesCard:n.canFetchAllTracks&&o}):a().createElement(h.u,{linkTitle:c.ag.get("collection.empty-page.playlists-cta"),onClick:i,title:c.ag.get("collection.empty-page.playlists-title"),message:c.ag.get("collection.empty-page.playlists-subtitle")},a().createElement(Be.Z,null))})),Ge=a().memo((()=>a().createElement(M.$,{uri:"collection/playlists",defaultSortOption:N},a().createElement(j.hz,{uri:"collection/playlists"},a().createElement(We,null)))));var Xe=n(57664),Ke=(n(23615),n(28979)),Je=n(33954),et=n(20169),tt=n(96816);class nt extends r.PureComponent{componentDidMount(){const{entities:e,viewId:t,country:n}=this.props;n&&!e&&t&&this.requestContent(t,n)}componentDidUpdate(e){const{entities:t,viewId:n,country:r}=this.props,{viewId:a}=e;r&&!t&&n!==a&&this.requestContent(n,r)}requestContent(e,t){const{onRequestView:n}=this.props;n(e,t)}render(){const{entities:e,viewId:t,total:n,title:r}=this.props;return e?a().createElement(tt.P,{title:r,total:n,seeAllUri:(0,et.pL)(t)},e.map((e=>{const t=(0,$e.U)(e.uri);return a().createElement(t,{key:e.uri,entity:e})}))):null}}const rt={onRequestView:Ke.MM};(0,l.$j)((e=>{const t="ginger-audio-shows-top-20-web",{content:n={},name:r}=e.entities.views[t]||{},{total:a=0,items:l}=n;return{total:a,title:r,entities:l,viewId:t,country:(0,Je.r)(e)}}),rt)(nt);var at=n(9071);const lt=a().memo((({nrShows:e})=>{const t=(0,r.useContext)(b.H),{filter:n}=(0,r.useContext)(j.fo),{sortState:s}=(0,r.useContext)(M.Q),o=(0,r.useRef)(!1),i=(0,r.useRef)({entities:[],total:e}),[u,m]=(0,r.useState)(0),{user:d}=(0,l.v9)(Ue.Gg),f=(0,r.useCallback)((async(e,r,a=!1)=>{if(!o.current){o.current=!a;const l=await t.getShows({offset:e,limit:r,filter:(0,k.$u)(n),sort:(0,k.EY)(s)});i.current=V(l,a,i.current),o.current=!1,m((e=>e+1))}}),[t,n,s,i]),p=(0,r.useCallback)((e=>{i.current=$(e,i.current),m((e=>e+1))}),[]);(0,r.useEffect)((()=>{f(0,50,!!u)}),[n,s]);const h=(0,r.useCallback)((()=>{i.current.entities.length!==i.current.total&&f(i.current.entities.length,50)}),[f,i]);return a().createElement(Q.C,{onReachBottom:h},a().createElement("div",{className:g.Z.header},a().createElement(y.Dy,{as:"h1",variant:y.Dy.canon},c.ag.get("podcasts")),a().createElement(r.Suspense,{fallback:null},a().createElement(T.E,{filterPlaceholder:c.ag.get("collection.filter.podcasts"),sortOptions:k.a6}))),a().createElement(G.Y,{onCollectionItemRemove:p},a().createElement(q.ZP,{value:"EntitiesGrid"},a().createElement(at.T,{render:()=>{const e=(0,se.bl)(d);return(n||!e||0===i.current.entities.length?[]:[a().createElement(r.Suspense,{fallback:null,key:"your-episodes-card"},a().createElement(Ce,{entity:e}))]).concat(D(i.current.entities).map(((e,t)=>{const n=(0,$e.U)(e.uri);return a().createElement(q.ZP,{key:e.uri,value:"card",index:t},a().createElement(n,{entity:e}))})))}}))))})),st=a().memo((()=>{const{total:e}=U();return null===e?a().createElement(z.h,{errorMessage:c.ag.get("error.request-collection-shows-failure")}):e?a().createElement(lt,{nrShows:e}):a().createElement("div",{className:"CollectionShowsContainer"},a().createElement(h.u,{linkTo:"/genre/podcasts-web",linkTitle:c.ag.get("collection.empty-page.shows-cta"),message:c.ag.get("collection.empty-page.shows-subtitle"),title:c.ag.get("collection.empty-page.shows-title")},a().createElement(Xe.Z,null)),a().createElement(nt,null))})),ct=a().memo((()=>a().createElement(M.$,{uri:"collection/podcasts",defaultSortOption:R},a().createElement(j.hz,{uri:"collection/podcasts"},a().createElement(st,null)))));var ot=n(21195),it=n(5129);const ut=a().lazy((async()=>await n.e(246).then(n.bind(n,88631)))),mt=()=>{const e=(0,l.v9)(o),t=(0,l.I0)(),n=(0,ot.g)();return(0,r.useEffect)((()=>{n.setReferrer("your_library")}),[t,n]),a().createElement("section",{className:"contentSpacing"},a().createElement(it.$,null,c.ag.get("collection.page-title")),a().createElement(s.AW,{path:"/collection/artists"},a().createElement(ee,null)),a().createElement(s.AW,{path:"/collection/albums"},a().createElement(le,null)),a().createElement(s.AW,{path:"/collection/playlists"},a().createElement(Ge,null)),e&&a().createElement(s.AW,{path:"/collection/podcasts"},a().createElement(ct,null)),a().createElement(s.AW,{path:"/collection/music-downloads"},a().createElement(ut,null)),a().createElement(p,null))};var dt=mt},24209:function(e,t,n){n.d(t,{Q:function(){return c},$:function(){return o}});var r=n(27378),a=n.n(r),l=n(94744),s=n(2315);const c=(0,r.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a LibrarySortProvider")},sortState:s.oT.ADDED_AT}),o=a().memo((function({uri:e,children:t,defaultSortOption:n}){return a().createElement(l.r,{uri:e,defaultState:n,sortContext:c},t)}))},9195:function(e,t,n){n.d(t,{E:function(){return d}});var r=n(27378),a=n.n(r),l=n(57660),s="collection-searchBar-searchBar",c=n(1266),o=n(81368),i=n(2315),u=n(24209);const m=a().memo((({sortOptions:e})=>{const{sortState:t,setSortState:n}=(0,r.useContext)(u.Q),l=(0,r.useCallback)((e=>{n(i.ei[e])}),[n]),s=e.map((e=>i.MY[e])),c=i.MY[t];return a().createElement(o.A,{options:s,onSelect:l,selected:c})})),d=a().memo((({filterPlaceholder:e,sortOptions:t})=>{const n=(0,r.useContext)(l.H);return a().createElement("div",{className:s},null!=n&&n.getCapabilities().canFilter?a().createElement(c.K,{placeholder:e}):null,null!=n&&n.getCapabilities().canSort?a().createElement(m,{sortOptions:t}):null)}))},59146:function(e,t,n){n.d(t,{$:function(){return f}});var r=n(35181),a=n(27378),l=n.n(a),s=n(97015),c=n(18291),o=n(42044),i=n(39519),u=n(73429),m=n(67831);function d(e){return e.includes("Spotify")?e:`Spotify – ${e}`}const f=({children:e})=>{let t=d(e);(e=>{const{mainLandmarkRef:t}=(0,m.Oh)(),n=(0,u.k6)(),r=(0,a.useRef)(n.length<2);r.current=n.length<2,(0,a.useEffect)((()=>{const n=t.current;n&&!r.current&&e&&(n.setAttribute("aria-label",e),n.focus())}),[e,t])})(e);const n=(0,c.Y)(i.o9)===o.PO.PLAYING,f=(0,c.Y)((e=>null==e?void 0:e.item));return f&&n&&((0,o.G_)(f)?t=[f.name,f.artists.map((e=>e.name)).join(r.ag.getSeparator())].join(" · "):(0,o.iw)(f)?t=[f.name,f.show.name].join(" · "):(0,o.k6)(f)&&(t=d(r.ag.get("ad-formats.advertisement")))),l().createElement(s.q,{defaultTitle:"Spotify",defer:!1},l().createElement("title",null,t))}},5129:function(e,t,n){n.d(t,{$:function(){return r.$}});var r=n(59146)},28685:function(e,t,n){n.d(t,{n:function(){return k}});var r=n(27378),a=n.n(r),l=n(60042),s=n.n(l),c=n(72724),o=n(35181),i="queue-tabBar-nav",u="_u8dRTQU7kP1o_3B3Zg8",m="queue-tabBar-headerItem",d="queue-tabBar-moreButtonActive",f="_qXv1chKLLm91pmKO3rA",g="MkyqSDEIiLFy5USm7gRH",p="queue-tabBar-active",h="queue-tabBar-headerItemLink",E="queue-tabBar-header",y="queue-tabBar-chevron",b=n(9807),v=n(36256),C=n(34761),w=n(79744);const O=({items:e,activeItemId:t,setActiveDropdownItem:n})=>a().createElement(C.v,null,e.map((e=>a().createElement(w.s,{role:"menuitemradio",to:e.to,exact:!0,"aria-checked":e.itemId===t,className:g,activeClassName:p,isActive:t=>!!t&&(n(e),!0),onClick:()=>{n(e)}},e.title)))),k=a().memo((({isCentered:e,links:t,landmarkLabel:n,className:l,windowSize:g=1/0})=>{const[C,w]=(0,r.useState)(null),k=(0,r.useRef)(null),[I,S]=(0,r.useState)([]),[x,D]=(0,r.useState)(0),[P,A]=(0,r.useState)([]);(0,r.useEffect)((()=>{k.current&&D(k.current.clientWidth)}),[g]),(0,r.useEffect)((()=>{if(!k.current)return;const e=Array.from(k.current.children).map((e=>e.clientWidth));S(e)}),[t]),(0,r.useEffect)((()=>{if(!k.current)return;if(I.slice(0,-1).reduce(((e,t)=>e+t),0)<=x)return void A([]);const e=I.reduce(((e,t)=>e>t?e:t),0),t=[];let n=e;I.forEach(((e,r)=>{x>=n+e?n+=e:t.push(r)})),A(t)}),[x,I]);const R=(0,r.useCallback)((e=>!!e&&(w(null),!0)),[]);return a().createElement("nav",{className:s()(l,i),"aria-label":n},a().createElement("ul",{className:e?u:E,ref:k},t.filter(((e,t)=>!P.includes(t))).map((e=>a().createElement("li",{key:e.to,className:m},a().createElement(c.O,{exact:!0,className:h,activeClassName:p,to:e.to,isActive:R},a().createElement(b.Dy,{variant:b.Dy.mestoBold},e.title))))),P.length||0===I.length?a().createElement("li",{className:m},a().createElement(v.xV,{renderInline:!0,menu:a().createElement(O,{items:t.filter(((e,t)=>P.includes(t))),activeItemId:null==C?void 0:C.itemId,setActiveDropdownItem:w})},((e,t,n)=>a().createElement("button",{className:s()(d,{[f]:C}),type:"button",onClick:t,ref:n},a().createElement(b.Dy,{as:"span",variant:b.Dy.mestoBold},C?C.title:o.ag.get("more")),a().createElement("span",{className:s()(y,{"spoticon-chart-up-16":e,"spoticon-chart-down-16":!e})}))))):null))}))},75570:function(e,t,n){n.d(t,{C:function(){return u}});var r=n(27378),a=n.n(r),l=n(9957),s=n(60042),c=n.n(s),o="_OIbzNaZUstr_dmIZnnU",i="_AqkCZVApAiJHpYacWlf";const u=a().memo((e=>{const{triggerOnInitialLoad:t=!1,onReachBottom:n,showScrollbar:s=!0,horizontalScroll:u=!1}=e,{ref:m,inView:d}=(0,l.YD)({initialInView:t});return(0,r.useEffect)((()=>{d&&n&&n()}),[d,n]),a().createElement("div",{className:c()({[i]:!s,[o]:u}),"data-testid":"infinite-scroll-list"},e.children,a().createElement("div",{ref:m}))}))},6152:function(e,t){t.Z={header:"collection-collection-header",tabBar:"collection-collection-tabBar",AddToPlaylistIcon:"Uc_ieXvp8ZmVwD7yBiAX"}}}]);
//# sourceMappingURL=xpui-routes-collection.js.map