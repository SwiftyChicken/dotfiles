"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[807],{62016:function(e,t,n){n.r(t),n.d(t,{HOME_REFRESH_TIMEOUT:function(){return I},default:function(){return S}});var r=n(27378),a=n.n(r),c=n(60042),o=n.n(c),l=n(28979),s=n(23104),u=n(33954),i=n(61154),m=n(47574),f=n(54798),d=n(24887),h=n(18299);const E=()=>(0,m.Sq)(f.Jw)===f.pF.ONHOME?a().createElement(h.w,null,a().createElement(d.M,{onSearch:!1})):null;var p=n(36726),g=n(35181),v=n(73429),w=n(49492),y=n(1391),C=n(18474),R=n(21195),b=n(73521),k=n(47326),N=n(5129);const I=18e5;var S=a().memo((()=>{const{isAnonymous:e}=(0,s.v9)(y.Gg),{status:t}=(0,k.h)(b.N9.SIGNUP),n=(0,C.v8)(e,t===b.b_.COMPLETE),c=(0,s.v9)(u.r),m=(0,s.v9)((e=>((e,t)=>e.entities.views[t]||null)(e,n))),f=(0,s.I0)(),d=(0,v.k6)(),h=(0,R.g)(),S=!!m,T=(null==m?void 0:m.timestamp)||0,M=(0,r.useCallback)((()=>{c&&f((0,l.MM)(n,c))}),[c,n,f]);(0,r.useEffect)((()=>{h.setReferrer("home")}),[f,h]),(0,r.useEffect)((()=>{S&&"POP"===d.action||M()}),[d.action,S,M]),(0,r.useEffect)((()=>{const e=()=>{Date.now()>T+I&&M()};return window.addEventListener("focus",e),()=>{window.removeEventListener("focus",e)}}),[T,M]);const P=null==m?void 0:m.content.items;return a().createElement(a().Fragment,null,a().createElement(N.$,null,g.ag.get("page.generic-title")),a().createElement(r.Suspense,{fallback:null},a().createElement(E,null)),m?a().createElement("section",{"data-testid":"home-page"},a().createElement("div",{className:i.Z.home},a().createElement("div",{className:o()(i.Z.content,"contentSpacing")},a().createElement(w.c,{spaces:P,viewName:m.name,viewId:n,isAnonymous:e})))):a().createElement(p.h,{errorMessage:g.ag.get("error.not_found.title.page")}))}))},24887:function(e,t,n){n.d(t,{M:function(){return I}});var r=n(27378),a=n.n(r),c=n(60042),o=n.n(c),l=n(73429),s=n(66917),u=n.n(s),i=n(35181),m=n(13737),f=n(62758),d="x-searchInput-searchInput",h="x-searchInput-searchInputInput",E="_a1k6SBEmHzjEgJUSQsr",p="x-searchInput-searchInputSearchIcon",g="x-searchInput-searchInputClearButton",v="x-searchInput-searchInputIconContainer",w="x-searchInput-searchInputIcon",y=n(23104),C=n(44621),R=n(44638),b=n(91421),k=n(33608),N=n(85192);const I=a().memo((({onSearch:e=!0})=>{const t=(0,r.useRef)(null),n=(0,r.useRef)(null),c=(0,l.k6)(),s=(0,y.I0)(),[{category:I,query:S},T]=(0,N.l)(),[M,P]=(0,r.useState)(S),U=!!I,{scrollNodeRef:_}=a().useContext(R.VX),q=new URLSearchParams(location.search),B=Boolean(q.get("showRecent")),L=U||B,H=(0,b.y)(((e,t)=>{T(e,t),_.current&&(_.current.scrollTop=0)}),200);(0,r.useEffect)((()=>{!L&&e&&t.current!==document.activeElement&&(n.current=document.activeElement,t.current&&t.current.focus())}),[c.location.key,e,L]);return a().createElement("div",{className:o()(d,{[E]:!e})},a().createElement("form",{onSubmit:e=>{e.preventDefault();const t=decodeURIComponent(M),n=u().from(t);var r,a;if(n)if(n.type===u().Type.AD){const e=u().idToHex(n.getBase62Id());if(n.getBase62Id()===e)return;s((0,C.HI)(e))}else c.push(n.toURLPath(!0));else M&&(null===(r=_.current)||void 0===r||null===(a=r.querySelector("h1, h2, h3, h4"))||void 0===a||a.focus())},role:"search"},a().createElement("input",{ref:t,className:o()(h,k.Z.mesto),value:M,maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,onChange:e=>{const t=e.currentTarget.value;P(t),H(t,L)},onKeyDown:e=>{"Escape"===e.key&&(M?(P(""),H("",L)):(t.current&&t.current.blur(),n.current instanceof HTMLElement&&n.current.focus()))},placeholder:e?i.ag.get("search.search-for-label"):i.ag.get("navbar.search"),onFocus:()=>{!L&&e||H(M,L)},"data-testid":"search-input"})),a().createElement("div",{className:v},a().createElement("span",{className:p},a().createElement(f.W,{size:24,viewBox:"0 0 512 512",className:w,"aria-hidden":!0})),M&&a().createElement("button",{className:g,onClick:()=>{t.current&&t.current.focus(),P(""),H("",L)},"aria-label":i.ag.get("search.a11y.clear-input")},a().createElement(m.T,{size:24,className:w}))))}))},85192:function(e,t,n){n.d(t,{l:function(){return c}});var r=n(27378),a=n(73429);function c(){const e=(0,a.k6)(),t=(0,a.$B)("/search/:query?/:category?"),n=(0,r.useCallback)((function(t,n){n?e.push(`/search/${encodeURIComponent(t)}`):e.replace(`/search/${encodeURIComponent(t)}`)}),[e]),c=function(e){try{return decodeURIComponent(e)}catch{return e}}((null==t?void 0:t.params.query)||""),o=null==t?void 0:t.params.category,l=(0,a.TH)(),s=new URLSearchParams(l.search);return[{query:c,category:o,showRecent:Boolean(s.get("showRecent"))},n]}},62758:function(e,t,n){n.d(t,{W:function(){return o}});var r=n(27378),a=n.n(r),c=n(36988);const o=e=>a().createElement(c.J,e,a().createElement("path",{d:"M349.714 347.937l93.714 109.969-16.254 13.969-93.969-109.969q-48.508 36.825-109.207 36.825-36.826 0-70.476-14.349t-57.905-38.603-38.603-57.905-14.349-70.476 14.349-70.476 38.603-57.905 57.905-38.603 70.476-14.349 70.476 14.349 57.905 38.603 38.603 57.905 14.349 70.476q0 37.841-14.73 71.619t-40.889 58.921zM224 377.397q43.428 0 80.254-21.461t58.286-58.286 21.461-80.254-21.461-80.254-58.286-58.285-80.254-21.46-80.254 21.46-58.285 58.285-21.46 80.254 21.46 80.254 58.285 58.286 80.254 21.461z",fill:"currentColor"}))}}]);
//# sourceMappingURL=xpui-routes-home.js.map